(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=e.name,this._link=e.link,this._selector=n,this._handleCardClick=r}var n,r;return n=t,(r=[{key:"_getTemplate",value:function(){return document.querySelector(this._selector).content.querySelector(".card").cloneNode(!0)}},{key:"_createCard",value:function(){var e=this.element.querySelector(".card__image");this.element.querySelector(".card__title").textContent=this._name,e.src=this._link,e.alt=this._name}},{key:"_handleLikeButton",value:function(e){e.target.classList.toggle("button_is-active")}},{key:"_handleButtontnDelete",value:function(){this.element.remove(),this.element=null}},{key:"_addEventListeners",value:function(){var e=this;this.element.querySelector(".card__image").addEventListener("click",(function(){e._handleCardClick(e._name,e._link)})),this.element.querySelector(".card__button-like").addEventListener("click",this._handleLikeButton),this.element.querySelector(".card__button-delete").addEventListener("click",(function(t){e._handleButtontnDelete(t)}))}},{key:"generateCard",value:function(){return this.element=this._getTemplate(),this._createCard(),this._addEventListeners(),this.element}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._formSelector=n,this.inputSelector=t.inputSelector,this.submitButtonSelector=t.submitButtonSelector,this.inactiveButtonClass=t.inactiveButtonClass,this.inputErrorClass=t.inputErrorClass,this.errorClass=t.errorClass,this.inputList=Array.from(this._formSelector.querySelectorAll(this.inputSelector)),this.buttonElement=this._formSelector.querySelector(this.submitButtonSelector)}var t,r;return t=e,(r=[{key:"resetValidation",value:function(){var e=this;this._toggleButtonState(),this.inputList.forEach((function(t){e._hideInputError(t)}))}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_showInputError",value:function(e,t){var n=this._formSelector.querySelector(".".concat(e.id,"-error"));e.classList.add(this.inputErrorClass),n.textContent=t,n.classList.add(this.errorClass)}},{key:"_hideInputError",value:function(e){var t=this._formSelector.querySelector(".".concat(e.id,"-error"));e.classList.remove(this.inputErrorClass),t.classList.remove(this.errorClass),t.textContent=""}},{key:"_hasInvalidInput",value:function(){return this.inputList.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?(this.buttonElement.classList.add(this.inactiveButtonClass),this.buttonElement.disabled=!0):(this.buttonElement.classList.remove(this.inactiveButtonClass),this.buttonElement.disabled=!1)}},{key:"_setEventListeners",value:function(){var e=this;this._toggleButtonState(this.inputList),this.inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&n(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderedItems=r,this._container=n,this._renderer=o}var t,n;return t=e,(n=[{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"renderItems",value:function(){var e=this;this._renderedItems.forEach((function(t){e._renderer(t)}))}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=t,this.description=n}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this.name.textContent,description:this.description.textContent}}},{key:"setUserInfo",value:function(e){this.name.textContent=e.userName,this.description.textContent=e.description}}])&&u(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(t){var n,r,o=this,i=t.popupSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=function(e){"Escape"===e.key&&o.close()},(n="_handleEscClose")in this?Object.defineProperty(this,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[n]=r,this.popup=document.querySelector(i),this.buttonPopupClose=this.popup.querySelector(".popup__button-close")}var t,n;return t=e,(n=[{key:"open",value:function(){this.popup.classList.add("popup_is-open"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this.popup.classList.remove("popup_is-open"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleClose",value:function(){var e=this;this.popup.addEventListener("mousedown",(function(t){var n=e.popup.querySelector(".popup__content");t.composedPath().includes(n)||e.close()}))}},{key:"setEventListeners",value:function(){var e=this;this.buttonPopupClose.addEventListener("click",(function(){e.close(e.popup)})),this._handleClose()}}])&&c(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(){return f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=d(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},f.apply(this,arguments)}function d(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function h(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=m(r);if(o){var n=m(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return h(this,e)});function u(e){var t,n=e.popupSelector,r=e.callbackSubmitForm;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,{popupSelector:n}))._callbackSubmitForm=r,t._popupForm=t.popup.querySelector(".popup__form"),t._popupInput=t.popup.querySelectorAll(".popup__input"),t}return t=u,(n=[{key:"_getInputValues",value:function(){var e=this;return this._inputValues={},this._popupInput.forEach((function(t){var n=t.value,r=t.name;e._inputValues[r]=n})),this._inputValues}},{key:"close",value:function(){f(m(u.prototype),"close",this).call(this),this._popupForm.reset()}},{key:"setEventListeners",value:function(){var e=this;f(m(u.prototype),"setEventListeners",this).call(this),this._popupForm.addEventListener("submit",(function(t){t.preventDefault(),e._callbackSubmitForm(e._getInputValues()),e.close()}))}}])&&p(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(s);function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(){return g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=S(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},g.apply(this,arguments)}function S(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=E(e)););return e}function k(e,t){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},k(e,t)}function w(e,t){if(t&&("object"===_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=E(r);if(o){var n=E(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return w(this,e)});function u(e){var t,n=e.popupSelector;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,{popupSelector:n}))._imagePopupCard=t.popup.querySelector(".popup__big-image"),t._imagePopupTitle=t.popup.querySelector(".popup__image-title"),t}return t=u,(n=[{key:"open",value:function(e,t){this._imagePopupCard.alt=e,this._imagePopupCard.src=t,this._imagePopupTitle.textContent=e,g(E(u.prototype),"open",this).call(this)}}])&&b(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(s),C={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button-submit",inactiveButtonClass:"popup__button-submit_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_active"},j={},P=document.querySelector(".profile__button-edit"),L=document.querySelector(".profile__title"),q=document.querySelector(".popup__input_name_firstname"),I=document.querySelector(".profile__subtitle"),B=document.querySelector(".popup__input_name_description"),x=document.querySelector(".popup__form_place_edit").getAttribute("name"),R=document.querySelector(".profile__button-add"),T=document.querySelector(".popup__form_place_add").getAttribute("name"),V=document.querySelector(".cards__items"),A=new a(L,I),F=new v({popupSelector:".popup_type_edit-profile",callbackSubmitForm:function(e){A.setUserInfo(e),F.close()}});F.setEventListeners(),P.addEventListener("click",(function(){var e=A.getUserInfo();q.value=e.name,B.value=e.description,j[x].resetValidation(),F.open()}));var D=new v({popupSelector:".popup_type_add-card",callbackSubmitForm:function(e){var t=M(e);z.addItem(t),D.close()}});D.setEventListeners(),R.addEventListener("click",(function(){D.open(),j[T].resetValidation()}));var U=new O({popupSelector:".popup_type_big-image"});U.setEventListeners();var N=function(e,t){U.open(e,t)},z=new i({items:[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}],renderer:function(e){var t=M(e);z.addItem(t)}},V),M=function(e){return new t(e,"#card-template",N).generateCard()};z.renderItems(),Array.from(document.querySelectorAll(C.formSelector)).forEach((function(e){var t=new r(C,e),n=e.getAttribute("name");j[n]=t,t.enableValidation()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dEJtRCxFQUFlVixvQkFHZixJQUFNakgsRUFBa0IsU0FBQ0csRUFBTUUsR0FDN0JzSCxFQUFlTixLQUFLbEgsRUFBTUUsRUFDM0IsRUFFS29ILEVBQVUsSUFBSTlELEVBQVEsQ0FDMUJFLE1DbkdtQixDQUNuQixDQUNFMUQsS0FBTSxRQUNORSxLQUFNLGlGQUVSLENBQ0VGLEtBQU0sc0JBQ05FLEtBQU0sNkZBRVIsQ0FDRUYsS0FBTSxVQUNORSxLQUFNLGtGQUVSLENBQ0VGLEtBQU0sV0FDTkUsS0FBTSxvRkFFUixDQUNFRixLQUFNLHFCQUNORSxLQUFNLDZGQUVSLENBQ0VGLEtBQU0sU0FDTkUsS0FBTSxrRkQ2RVJ5RCxTQUFVLFNBQUNLLEdBQ1QsSUFBTXlELEVBQWNKLEVBQVdyRCxHQUMvQnNELEVBQVFDLFFBQVFFLEVBQ2pCLEdBQ0FoQixHQUdHWSxFQUFhLFNBQUNyRCxHQUdsQixPQUZhLElBQUl0RSxFQUFLc0UsRUE3RUgsaUJBNkV1Qm5FLEdBQ2pCNkgsY0FFMUIsRUFFREosRUFBUUssY0EzRld4RixNQUFNQyxLQUFLL0IsU0FBU2dDLGlCQUFpQlgsRUFBU0MsZUFDdERhLFNBQVEsU0FBQ29GLEdBQ2hCLElBQU1DLEVBQWdCLElBQUlwRyxFQUFjQyxFQUFVa0csR0FDNUNFLEVBQWNGLEVBQVl0QixhQUFhLFFBQzdDUCxFQUFhK0IsR0FBZUQsRUFDNUJBLEVBQWNFLGtCQUNmLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9jYXJkcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcclxuZXhwb3J0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKGluZm8sIHNlbGVjdG9yLCBoYW5kbGVDYXJkQ2xpY2spIHtcclxuICAgIHRoaXMuX25hbWUgPSBpbmZvLm5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gaW5mby5saW5rO1xyXG4gICAgdGhpcy5fc2VsZWN0b3IgPSBzZWxlY3RvcjtcclxuICAgIC8vdGhpcy5fYmlnSW1hZ2UgPSBiaWdJbWFnZTtcclxuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICB9XHJcblxyXG4gIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKCcuY2FyZCcpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcblxyXG4gICAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgX2NyZWF0ZUNhcmQoKSB7XHJcbiAgICBjb25zdCBiaWdJbWFnZSA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9faW1hZ2UnKTtcclxuICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fdGl0bGUnKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICBiaWdJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgYmlnSW1hZ2UuYWx0ID0gdGhpcy5fbmFtZTtcclxuXHJcbiAgfVxyXG5cclxuICBfaGFuZGxlTGlrZUJ1dHRvbihldnQpIHtcclxuICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LnRvZ2dsZSgnYnV0dG9uX2lzLWFjdGl2ZScpO1xyXG4gIH07XHJcblxyXG4gIF9oYW5kbGVCdXR0b250bkRlbGV0ZSgpIHtcclxuICAgIHRoaXMuZWxlbWVudC5yZW1vdmUoKTtcclxuICAgIHRoaXMuZWxlbWVudCA9IG51bGw7XHJcbiAgfVxyXG5cclxuICBfYWRkRXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBjb25zdCBiaWdJbWFnZSA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9faW1hZ2UnKTtcclxuICAgIC8vY29uc29sZS5sb2coYmlnSW1hZ2UpO1xyXG4gICAgYmlnSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7IHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKSB9KTtcclxuXHJcbiAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2J1dHRvbi1saWtlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVMaWtlQnV0dG9uKTtcclxuXHJcbiAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2J1dHRvbi1kZWxldGUnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlQnV0dG9udG5EZWxldGUoZXZ0KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZ2VuZXJhdGVDYXJkKCkge1xyXG4gICAgdGhpcy5lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgIHRoaXMuX2NyZWF0ZUNhcmQoKTtcclxuICAgIHRoaXMuX2FkZEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICByZXR1cm4gdGhpcy5lbGVtZW50O1xyXG4gIH1cclxuXHJcbn0iLCJleHBvcnQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1TZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fZm9ybVNlbGVjdG9yID0gZm9ybVNlbGVjdG9yO1xyXG4gICAgdGhpcy5pbnB1dFNlbGVjdG9yID0gc2V0dGluZ3MuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuaW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLmlucHV0RXJyb3JDbGFzcyA9IHNldHRpbmdzLmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuZXJyb3JDbGFzcyA9IHNldHRpbmdzLmVycm9yQ2xhc3M7XHJcblxyXG4gICAgdGhpcy5pbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm1TZWxlY3Rvci5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuaW5wdXRTZWxlY3RvcikpO1xyXG4gICAgdGhpcy5idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybVNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3IodGhpcy5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICByZXNldFZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG5cclxuICAgIHRoaXMuaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1TZWxlY3Rvci5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLmVycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybVNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuaW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuZXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSAnJztcclxuICB9XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5pbnB1dExpc3Quc29tZShpbnB1dEVsZW1lbnQgPT4ge1xyXG4gICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgICB0aGlzLmJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLmJ1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICB9O1xyXG4gIH07XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKHRoaXMuaW5wdXRMaXN0KTtcclxuICAgIHRoaXMuaW5wdXRMaXN0LmZvckVhY2goaW5wdXRFbGVtZW50ID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG5cclxufTsiLCJleHBvcnQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGNvbnRhaW5lclNlbGVjdG9yO1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbn0iLCJleHBvcnQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKG5hbWUsIGRlc2NyaXB0aW9uKSB7XHJcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgdGhpcy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICBjb25zdCBpbmZvID0ge1xyXG4gICAgICBuYW1lOiB0aGlzLm5hbWUudGV4dENvbnRlbnQsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLmRlc2NyaXB0aW9uLnRleHRDb250ZW50XHJcbiAgICB9XHJcbiAgICByZXR1cm4gaW5mbztcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKGVsZW1lbnQpIHtcclxuICAgIHRoaXMubmFtZS50ZXh0Q29udGVudCA9IGVsZW1lbnQudXNlck5hbWU7XHJcbiAgICB0aGlzLmRlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gZWxlbWVudC5kZXNjcmlwdGlvbjtcclxuICB9XHJcblxyXG59IiwiZXhwb3J0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSkge1xyXG4gICAgdGhpcy5wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLmJ1dHRvblBvcHVwQ2xvc2UgPSB0aGlzLnBvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fYnV0dG9uLWNsb3NlJyk7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5wb3B1cC5jbGFzc0xpc3QuYWRkKCdwb3B1cF9pcy1vcGVuJyk7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLnBvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX2lzLW9wZW4nKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gJ0VzY2FwZScpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVDbG9zZSgpIHtcclxuICAgIHRoaXMucG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGV2dCkgPT4ge1xyXG4gICAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLnBvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY29udGVudCcpXHJcbiAgICAgIGNvbnN0IGNsaWNrID0gZXZ0LmNvbXBvc2VkUGF0aCgpLmluY2x1ZGVzKGNvbnRhaW5lcikgLy9jb21wb3NlUGF0aCDQstC+0LfQstGA0LDRidCw0LXRgiDQv9GD0YLRjCDQuiDQutC+0L3RgtC10LnQvdC10YDRg1xyXG4gICAgICBpZiAoIWNsaWNrKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuYnV0dG9uUG9wdXBDbG9zZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgdGhpcy5jbG9zZSh0aGlzLnBvcHVwKVxyXG4gICAgfSlcclxuICAgIHRoaXMuX2hhbmRsZUNsb3NlKCk7XHJcbiAgfVxyXG59XHJcblxyXG4gIC8vIF9oYW5kbGVPdmVybGF5Q2xvc2UgPSAoZXZ0KSA9PiB7XHJcbiAgLy8gICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwJykpIHtcclxuICAvLyAgICAgdGhpcy5jbG9zZSgpO1xyXG4gIC8vICAgfVxyXG4gIC8vIH1cclxuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tICcuL1BvcHVwLmpzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciwgY2FsbGJhY2tTdWJtaXRGb3JtIH0pIHtcclxuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcclxuICAgIHRoaXMuX2NhbGxiYWNrU3VibWl0Rm9ybSA9IGNhbGxiYWNrU3VibWl0Rm9ybTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMucG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtJyk7XHJcbiAgICB0aGlzLl9wb3B1cElucHV0ID0gdGhpcy5wb3B1cC5xdWVyeVNlbGVjdG9yQWxsKCcucG9wdXBfX2lucHV0Jyk7XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dFZhbHVlcyA9IHt9OyAvL9C90L7QstGL0Lkg0L7QsdGK0LXQutGCXHJcbiAgICB0aGlzLl9wb3B1cElucHV0LmZvckVhY2goKGlucHV0KSA9PiB7IC8v0L/QtdGA0LXQsdC40YDQsNC10Lwg0LjQvdC/0YPRgtGLXHJcbiAgICAgIGNvbnN0IHZhbHVlID0gaW5wdXQudmFsdWU7XHJcbiAgICAgIGNvbnN0IGlucHV0TmFtZSA9IGlucHV0Lm5hbWU7XHJcbiAgICAgIHRoaXMuX2lucHV0VmFsdWVzW2lucHV0TmFtZV0gPSB2YWx1ZTtcclxuICAgIH0pXHJcbiAgICByZXR1cm4gdGhpcy5faW5wdXRWYWx1ZXM7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9jYWxsYmFja1N1Ym1pdEZvcm0odGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH0pXHJcbiAgfVxyXG5cclxufSIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSAnLi9Qb3B1cC5qcyc7XHJcblxyXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yIH0pIHtcclxuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcclxuXHJcbiAgICB0aGlzLl9pbWFnZVBvcHVwQ2FyZCA9IHRoaXMucG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19iaWctaW1hZ2UnKTtcclxuICAgIHRoaXMuX2ltYWdlUG9wdXBUaXRsZSA9IHRoaXMucG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWFnZS10aXRsZScpO1xyXG4gIH1cclxuXHJcbiAgb3BlbihuYW1lLCBsaW5rKSB7XHJcbiAgICB0aGlzLl9pbWFnZVBvcHVwQ2FyZC5hbHQgPSBuYW1lO1xyXG4gICAgdGhpcy5faW1hZ2VQb3B1cENhcmQuc3JjID0gbGluaztcclxuICAgIHRoaXMuX2ltYWdlUG9wdXBUaXRsZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgfVxyXG59IiwiaW1wb3J0ICcuL2luZGV4LmNzcyc7XHJcblxyXG5pbXBvcnQgeyBpbml0aWFsQ2FyZHMgfSBmcm9tICcuLi9jb21wb25lbnRzL2NhcmRzLmpzJztcclxuaW1wb3J0IHsgQ2FyZCB9IGZyb20gJy4uL2NvbXBvbmVudHMvQ2FyZC5qcyc7XHJcbmltcG9ydCB7IEZvcm1WYWxpZGF0b3IgfSBmcm9tICcuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMnO1xyXG5pbXBvcnQgeyBTZWN0aW9uIH0gZnJvbSAnLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzJztcclxuaW1wb3J0IHsgVXNlckluZm8gfSBmcm9tICcuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzJztcclxuaW1wb3J0IHsgUG9wdXBXaXRoRm9ybSB9IGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyc7XHJcbmltcG9ydCB7IFBvcHVwV2l0aEltYWdlIH0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyc7XHJcblxyXG5jb25zdCBzZXR0aW5ncyA9IHtcclxuICBmb3JtU2VsZWN0b3I6ICcucG9wdXBfX2Zvcm0nLFxyXG4gIGlucHV0U2VsZWN0b3I6ICcucG9wdXBfX2lucHV0JyxcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5wb3B1cF9fYnV0dG9uLXN1Ym1pdCcsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogJ3BvcHVwX19idXR0b24tc3VibWl0X2Rpc2FibGVkJyxcclxuICBpbnB1dEVycm9yQ2xhc3M6ICdwb3B1cF9faW5wdXRfdHlwZV9lcnJvcicsXHJcbiAgZXJyb3JDbGFzczogJ3BvcHVwX19pbnB1dC1lcnJvcl9hY3RpdmUnXHJcbn07XHJcblxyXG5jb25zdCBmb3JtVmFsaWRhdGUgPSB7fTtcclxuXHJcbmNvbnN0IGVuYWJsZVZhbGlkYXRpb24gPSAoKSA9PiB7XHJcbiAgY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2V0dGluZ3MuZm9ybVNlbGVjdG9yKSk7XHJcbiAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcclxuICAgIGNvbnN0IGZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgZm9ybUVsZW1lbnQpO1xyXG4gICAgY29uc3QgZm9ybU5ld05hbWUgPSBmb3JtRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ25hbWUnKTtcclxuICAgIGZvcm1WYWxpZGF0ZVtmb3JtTmV3TmFtZV0gPSBmb3JtVmFsaWRhdG9yO1xyXG4gICAgZm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmNvbnN0IGNhcmRUZW1wbGF0ZSA9ICcjY2FyZC10ZW1wbGF0ZSc7XHJcblxyXG5jb25zdCBidXR0b25FZGl0UHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19idXR0b24tZWRpdCcpO1xyXG5jb25zdCB0aXRsZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fdGl0bGUnKTtcclxuY29uc3QgbmFtZUZpZWxkRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfbmFtZV9maXJzdG5hbWUnKTtcclxuY29uc3Qgc3VidGl0bGVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX3N1YnRpdGxlJyk7XHJcbmNvbnN0IGRlc2NyaXB0aW9uRmllbGRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbnB1dF9uYW1lX2Rlc2NyaXB0aW9uJyk7XHJcbmNvbnN0IHByb2ZpbGVGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtX3BsYWNlX2VkaXQnKTtcclxuY29uc3QgcG9wdXBQcm9maWxlTmFtZSA9IHByb2ZpbGVGb3JtLmdldEF0dHJpYnV0ZSgnbmFtZScpO1xyXG5cclxuY29uc3QgYnV0dG9uQWRkQ2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19idXR0b24tYWRkJyk7XHJcbmNvbnN0IGNhcmRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtX3BsYWNlX2FkZCcpO1xyXG5jb25zdCBwb3B1cENhcmROYW1lID0gY2FyZEZvcm0uZ2V0QXR0cmlidXRlKCduYW1lJyk7XHJcblxyXG5jb25zdCBjYXJkc0l0ZW1zRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkc19faXRlbXMnKVxyXG5cclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8odGl0bGVFbGVtZW50LCBzdWJ0aXRsZUVsZW1lbnQpO1xyXG5cclxuLy/RjdC60LfQtdC80L/Qu9GP0YAg0L/QvtC/0LDQv9CwINC/0YDQvtGE0LjQu9GPXHJcbmNvbnN0IHByb2ZpbGVQb3B1cCA9ICcucG9wdXBfdHlwZV9lZGl0LXByb2ZpbGUnO1xyXG5jb25zdCBwb3B1cFByb2ZpbGVXaXRoRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcclxuICBwb3B1cFNlbGVjdG9yOiBwcm9maWxlUG9wdXAsXHJcbiAgY2FsbGJhY2tTdWJtaXRGb3JtOiAoZm9ybURhdGEpID0+IHtcclxuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKGZvcm1EYXRhKVxyXG4gICAgcG9wdXBQcm9maWxlV2l0aEZvcm0uY2xvc2UoKTtcclxuICB9XHJcbn0pO1xyXG5wb3B1cFByb2ZpbGVXaXRoRm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy8g0L7RgtC60YDRi9GC0LjQtSDQv9C+0L/QsNC/0LAg0L/RgNC+0YTQuNC70Y9cclxuYnV0dG9uRWRpdFByb2ZpbGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgY29uc3QgdXNlckluZm9Qcm9maWxlID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuICBuYW1lRmllbGRFbGVtZW50LnZhbHVlID0gdXNlckluZm9Qcm9maWxlLm5hbWU7XHJcbiAgZGVzY3JpcHRpb25GaWVsZEVsZW1lbnQudmFsdWUgPSB1c2VySW5mb1Byb2ZpbGUuZGVzY3JpcHRpb247XHJcbiAgZm9ybVZhbGlkYXRlW3BvcHVwUHJvZmlsZU5hbWVdLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIHBvcHVwUHJvZmlsZVdpdGhGb3JtLm9wZW4oKTtcclxufSlcclxuXHJcbi8v0LTQvtCx0LDQstC70LXQvdC40LUg0JrQsNGA0YLQvtGH0LrQuFxyXG5jb25zdCBjYXJkUG9wdXAgPSAnLnBvcHVwX3R5cGVfYWRkLWNhcmQnO1xyXG5jb25zdCBwb3B1cENhcmRXaXRoRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcclxuICBwb3B1cFNlbGVjdG9yOiBjYXJkUG9wdXAsXHJcbiAgY2FsbGJhY2tTdWJtaXRGb3JtOiAoZm9ybURhdGEpID0+IHtcclxuICAgIGNvbnN0IGNyZWF0ZWRDYXJkID0gY3JlYXRlQ2FyZChmb3JtRGF0YSlcclxuICAgIHNlY3Rpb24uYWRkSXRlbShjcmVhdGVkQ2FyZCk7XHJcbiAgICBwb3B1cENhcmRXaXRoRm9ybS5jbG9zZSgpO1xyXG4gIH1cclxufSlcclxucG9wdXBDYXJkV2l0aEZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vINC+0YLQutGA0YvRgtC40LUg0JrQsNGA0YLQvtGH0LrQuFxyXG5cclxuYnV0dG9uQWRkQ2FyZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICBwb3B1cENhcmRXaXRoRm9ybS5vcGVuKCk7XHJcbiAgZm9ybVZhbGlkYXRlW3BvcHVwQ2FyZE5hbWVdLnJlc2V0VmFsaWRhdGlvbigpO1xyXG59KVxyXG5cclxuLy/RjdC60LfQtdC80L/Qu9GP0YAg0L/QvtC/0LDQv9CwINGBINCa0LDRgNGC0LjQvdC60L7QuVxyXG5jb25zdCBiaWdJbWFnZVBvcHVwID0gJy5wb3B1cF90eXBlX2JpZy1pbWFnZSc7XHJcbmNvbnN0IHBvcHVwV2l0aEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKHsgcG9wdXBTZWxlY3RvcjogYmlnSW1hZ2VQb3B1cCB9KTtcclxucG9wdXBXaXRoSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8v0L7RgtC60YDRi9GC0LjQtSDQutCw0YDRgtC40L3QutC4XHJcbmNvbnN0IGhhbmRsZUNhcmRDbGljayA9IChuYW1lLCBsaW5rKSA9PiB7XHJcbiAgcG9wdXBXaXRoSW1hZ2Uub3BlbihuYW1lLCBsaW5rKTtcclxufVxyXG5cclxuY29uc3Qgc2VjdGlvbiA9IG5ldyBTZWN0aW9uKHtcclxuICBpdGVtczogaW5pdGlhbENhcmRzLFxyXG4gIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xyXG4gICAgY29uc3QgY3JlYXRlZEl0ZW0gPSBjcmVhdGVDYXJkKGl0ZW0pO1xyXG4gICAgc2VjdGlvbi5hZGRJdGVtKGNyZWF0ZWRJdGVtKTtcclxuICB9XHJcbn0sIGNhcmRzSXRlbXNFbGVtZW50KTtcclxuXHJcbi8v0YHQvtC30LTQsNC10Lwg0Y3QutC30LXQvNC/0LvRj9GAINC60LDRgNGC0L7Rh9C60LhcclxuY29uc3QgY3JlYXRlQ2FyZCA9IChpdGVtKSA9PiB7XHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGl0ZW0sIGNhcmRUZW1wbGF0ZSwgaGFuZGxlQ2FyZENsaWNrKTtcclxuICBjb25zdCBjcmVhdGVkQ2FyZCA9IGNhcmQuZ2VuZXJhdGVDYXJkKCk7XHJcbiAgcmV0dXJuIGNyZWF0ZWRDYXJkO1xyXG59XHJcblxyXG5zZWN0aW9uLnJlbmRlckl0ZW1zKCk7XHJcblxyXG5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG4vL2luaXRpYWxDYXJkcy5mb3JFYWNoKChjYXJkKSA9PiB7IHJlbmRlckNhcmQoY3JlYXRlQ2FyZChjYXJkKSk7IH0pO1xyXG5cclxuLy9jb25zdCBwcm9maWxlUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfdHlwZV9lZGl0LXByb2ZpbGUnKVxyXG4vL2NvbnN0IGNhcmRQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF90eXBlX2FkZC1jYXJkJylcclxuLy9jb25zdCBpbWFnZVBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3R5cGVfYmlnLWltYWdlJylcclxuLy8gY29uc3QgcG9wdXBFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cCcpXHJcblxyXG4vLyBjb25zdCBidXR0b25BZGRDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2J1dHRvbi1hZGQnKVxyXG5cclxuLy8gY29uc3QgdGl0bGVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX3RpdGxlJylcclxuLy8gY29uc3Qgc3VidGl0bGVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX3N1YnRpdGxlJylcclxuLy8gY29uc3QgbmFtZUZpZWxkRWxlbWVudCA9IHByb2ZpbGVQb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0X25hbWVfZmlyc3RuYW1lJylcclxuLy8gY29uc3QgZGVzY3JpcHRpb25GaWVsZEVsZW1lbnQgPSBwcm9maWxlUG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbnB1dF9uYW1lX2Rlc2NyaXB0aW9uJylcclxuXHJcbi8vIGNvbnN0IGZvcm1FbGVtZW50UHJvZmlsZSA9IHByb2ZpbGVQb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm1fcGxhY2VfZWRpdCcpXHJcbi8vIGNvbnN0IGZvcm1FbGVtZW50Q2FyZCA9IGNhcmRQb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm1fcGxhY2VfYWRkJylcclxuLy8gY29uc3QgZm9ybUVkaXRQcm9maWxlTmFtZSA9IGZvcm1FbGVtZW50UHJvZmlsZS5nZXRBdHRyaWJ1dGUoJ25hbWUnKTtcclxuLy8gY29uc3QgZm9ybUNhcmROYW1lID0gZm9ybUVsZW1lbnRDYXJkLmdldEF0dHJpYnV0ZSgnbmFtZScpO1xyXG5cclxuLy8gY29uc3QgbmFtZUFkZEZpZWxkRWxlbWVudCA9IGNhcmRQb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0X25hbWVfcGxhY2UnKVxyXG4vLyBjb25zdCBsaW5rRmllbGRFbGVtZW50ID0gY2FyZFBvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfbmFtZV9saW5rJylcclxuLy8gY29uc3QgbmFtZU5ld0ZpZWxkRWxlbWVudCA9IGNhcmRQb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0X25hbWVfcGxhY2UnKVxyXG4vLyBjb25zdCBsaW5rTmV3RmllbGRFbGVtZW50ID0gY2FyZFBvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfbmFtZV9saW5rJylcclxuXHJcblxyXG4vLyBjb25zdCBnZXRDYXJkQnlFdmVudCA9IGV2dCA9PiBldnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuY2FyZCcpO1xyXG5cclxuLy9jb25zdCBidXR0b25TdWJtaXROZXdDYXJkID0gZm9ybUVsZW1lbnRDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fYnV0dG9uLXN1Ym1pdCcpXHJcblxyXG4vLyBmdW5jdGlvbiBlZGl0Rm9ybVByb2ZpbGUoZXZlbnQpIHtcclxuLy8gICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXHJcbi8vICAgdGl0bGVFbGVtZW50LnRleHRDb250ZW50ID0gbmFtZUZpZWxkRWxlbWVudC52YWx1ZTtcclxuLy8gICBzdWJ0aXRsZUVsZW1lbnQudGV4dENvbnRlbnQgPSBkZXNjcmlwdGlvbkZpZWxkRWxlbWVudC52YWx1ZTtcclxuLy8gICBjbG9zZVBvcHVwKHByb2ZpbGVQb3B1cCk7XHJcbi8vIH07XHJcblxyXG4vLyBmdW5jdGlvbiBhZGRGb3JtQ2FyZChldnQpIHtcclxuLy8gICBldnQucHJldmVudERlZmF1bHQoKVxyXG4vLyAgIGNvbnN0IGNhcmROZXcgPSB7XHJcbi8vICAgICBuYW1lOiBuYW1lTmV3RmllbGRFbGVtZW50LnZhbHVlLFxyXG4vLyAgICAgbGluazogbGlua05ld0ZpZWxkRWxlbWVudC52YWx1ZVxyXG4vLyAgIH07XHJcbi8vICAgcmVuZGVyQ2FyZChjcmVhdGVDYXJkKGNhcmROZXcpKTtcclxuLy8gICBmb3JtRWxlbWVudENhcmQucmVzZXQoKTtcclxuLy8gICBjbG9zZVBvcHVwKGNhcmRQb3B1cCk7XHJcblxyXG4vLyB9O1xyXG5cclxuLy8gY29uc3QgaW5mbyA9IHtcclxuLy8gICBuYW1lOiBuYW1lQWRkRmllbGRFbGVtZW50LnZhbHVlLFxyXG4vLyAgIGxpbms6IGxpbmtGaWVsZEVsZW1lbnQudmFsdWVcclxuLy8gfVxyXG5cclxuLy8gZnVuY3Rpb24gb3BlbkNhcmQobmFtZSwgbGluaykge1xyXG4vLyAgIGltYWdlUG9wdXBDYXJkLnNyYyA9IGxpbms7XHJcbi8vICAgaW1hZ2VQb3B1cFRpdGxlLnRleHRDb250ZW50ID0gbmFtZTtcclxuLy8gICBpbWFnZVBvcHVwQ2FyZC5hbHQgPSBuYW1lO1xyXG4vLyAgIG9wZW5Qb3B1cChpbWFnZVBvcHVwKTtcclxuLy8gfTsiLCJjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogJ9CQ0YDRhdGL0LcnLFxyXG4gICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9hcmtoeXouanBnJ1xyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogJ9Cn0LXQu9GP0LHQuNC90YHQutCw0Y8g0L7QsdC70LDRgdGC0YwnLFxyXG4gICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9jaGVseWFiaW5zay1vYmxhc3QuanBnJ1xyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogJ9CY0LLQsNC90L7QstC+JyxcclxuICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvaXZhbm92by5qcGcnXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiAn0JrQsNC80YfQsNGC0LrQsCcsXHJcbiAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2thbWNoYXRrYS5qcGcnXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiAn0KXQvtC70LzQvtCz0L7RgNGB0LrQuNC5INGA0LDQudC+0L0nLFxyXG4gICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9raG9sbW9nb3Jza3ktcmF5b24uanBnJ1xyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogJ9CR0LDQudC60LDQuycsXHJcbiAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2JhaWthbC5qcGcnXHJcbiAgfVxyXG5dO1xyXG5cclxuZXhwb3J0IHsgaW5pdGlhbENhcmRzIH07Il0sIm5hbWVzIjpbIkNhcmQiLCJpbmZvIiwic2VsZWN0b3IiLCJoYW5kbGVDYXJkQ2xpY2siLCJ0aGlzIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX3NlbGVjdG9yIiwiX2hhbmRsZUNhcmRDbGljayIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJiaWdJbWFnZSIsImVsZW1lbnQiLCJ0ZXh0Q29udGVudCIsInNyYyIsImFsdCIsImV2dCIsInRhcmdldCIsImNsYXNzTGlzdCIsInRvZ2dsZSIsInJlbW92ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlTGlrZUJ1dHRvbiIsIl9oYW5kbGVCdXR0b250bkRlbGV0ZSIsIl9nZXRUZW1wbGF0ZSIsIl9jcmVhdGVDYXJkIiwiX2FkZEV2ZW50TGlzdGVuZXJzIiwiRm9ybVZhbGlkYXRvciIsInNldHRpbmdzIiwiZm9ybVNlbGVjdG9yIiwiX2Zvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImJ1dHRvbkVsZW1lbnQiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJmb3JFYWNoIiwiaW5wdXRFbGVtZW50IiwiX2hpZGVJbnB1dEVycm9yIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJhZGQiLCJzb21lIiwiX2hhc0ludmFsaWRJbnB1dCIsImRpc2FibGVkIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl9zZXRFdmVudExpc3RlbmVycyIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfcmVuZGVyZWRJdGVtcyIsIl9jb250YWluZXIiLCJfcmVuZGVyZXIiLCJwcmVwZW5kIiwiaXRlbSIsIlVzZXJJbmZvIiwiZGVzY3JpcHRpb24iLCJ1c2VyTmFtZSIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsImtleSIsImNsb3NlIiwicG9wdXAiLCJidXR0b25Qb3B1cENsb3NlIiwiX2hhbmRsZUVzY0Nsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImNvbnRhaW5lciIsImNvbXBvc2VkUGF0aCIsImluY2x1ZGVzIiwiX2hhbmRsZUNsb3NlIiwiUG9wdXBXaXRoRm9ybSIsImNhbGxiYWNrU3VibWl0Rm9ybSIsIl9jYWxsYmFja1N1Ym1pdEZvcm0iLCJfcG9wdXBGb3JtIiwiX3BvcHVwSW5wdXQiLCJfaW5wdXRWYWx1ZXMiLCJpbnB1dCIsInZhbHVlIiwiaW5wdXROYW1lIiwicmVzZXQiLCJwcmV2ZW50RGVmYXVsdCIsIl9nZXRJbnB1dFZhbHVlcyIsIlBvcHVwV2l0aEltYWdlIiwiX2ltYWdlUG9wdXBDYXJkIiwiX2ltYWdlUG9wdXBUaXRsZSIsImZvcm1WYWxpZGF0ZSIsImJ1dHRvbkVkaXRQcm9maWxlIiwidGl0bGVFbGVtZW50IiwibmFtZUZpZWxkRWxlbWVudCIsInN1YnRpdGxlRWxlbWVudCIsImRlc2NyaXB0aW9uRmllbGRFbGVtZW50IiwicG9wdXBQcm9maWxlTmFtZSIsImdldEF0dHJpYnV0ZSIsImJ1dHRvbkFkZENhcmQiLCJwb3B1cENhcmROYW1lIiwiY2FyZHNJdGVtc0VsZW1lbnQiLCJ1c2VySW5mbyIsInBvcHVwUHJvZmlsZVdpdGhGb3JtIiwiZm9ybURhdGEiLCJzZXRVc2VySW5mbyIsInNldEV2ZW50TGlzdGVuZXJzIiwidXNlckluZm9Qcm9maWxlIiwiZ2V0VXNlckluZm8iLCJyZXNldFZhbGlkYXRpb24iLCJvcGVuIiwicG9wdXBDYXJkV2l0aEZvcm0iLCJjcmVhdGVkQ2FyZCIsImNyZWF0ZUNhcmQiLCJzZWN0aW9uIiwiYWRkSXRlbSIsInBvcHVwV2l0aEltYWdlIiwiY3JlYXRlZEl0ZW0iLCJnZW5lcmF0ZUNhcmQiLCJyZW5kZXJJdGVtcyIsImZvcm1FbGVtZW50IiwiZm9ybVZhbGlkYXRvciIsImZvcm1OZXdOYW1lIiwiZW5hYmxlVmFsaWRhdGlvbiJdLCJzb3VyY2VSb290IjoiIn0=